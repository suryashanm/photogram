let $grid=$("#masonry-area").masonry({percentPosition:!0});function setCookie(t,o,e){var s,a="";e&&((s=new Date).setTime(s.getTime()+24*e*60*60*1e3),a="; expires="+s.toUTCString()),document.cookie=t+"="+o+a+"; path=/"}$grid.imagesLoaded().progress(function(){$grid.masonry("layout")}),$.post("/api/posts/count",{id:10},function(t){console.log(t),$("#total-posts").html("Total posts: "+t.count)}),$("#share-memory").on("click",function(){var o=new FormData,e=$("#post_image")[0].files;""==$("#post_text").val()?(t=new Toast("Error","now","Please enter a caption")).show():0<e.length?(o.append("post_image",e[0]),o.append("post_text",$("#post_text").val()),$.ajax({url:"/api/posts/add",type:"POST",data:o,contentType:!1,processData:!1,success:function(t){console.log("File uploaded successfully"),console.log(t),t=$(t),$grid.prepend(t).masonry("prepended",t).masonry("layout"),$grid.imagesLoaded().progress(function(){$grid.masonry("layout")}),$("#post_image").val(""),$("#post_text").val("")},error:function(t){console.error("Error uploading file"),console.log(t)}})):(t=new Toast("Error","now","Please select a file to upload")).show()}),$(document).on("click",".album .btn-like",function(){post_id=$(this).parent().attr("data-id"),$this=$(this),"Like"==$(this).html()?$(this).html("Liked"):$(this).html("Like"),$(this).hasClass("btn-outline-primary")?$(this).removeClass("btn-outline-primary").addClass("btn-primary"):$(this).removeClass("btn-primary").addClass("btn-outline-primary"),$.post("/api/posts/like",{id:post_id},function(t,o,e){"success"==o&&(t.liked?($($this).html("Liked"),$($this).removeClass("btn-outline-primary").addClass("btn-primary")):($($this).html("Like"),$($this).removeClass("btn-primary").addClass("btn-outline-primary")))})}),$(document).on("click",".album .btn-delete",function(){post_id=$(this).parent().attr("data-id"),(d=new Dialog("Delete Post","Are you sure want to remove this post")).setButtons([{name:"Delete",class:"btn-danger",onClick:function(t){console.log(`Assume this post ${post_id} is deleted`),$.post("/api/posts/delete",{id:post_id},function(t,o,e){console.log(o),console.log(t),"success"==o&&(t=$("#post-"+post_id)[0],$grid.masonry("remove",t).masonry("layout"))}),$(t.data.modal).modal("hide")}},{name:"Cancel",class:"btn-secondary",onClick:function(t){$(t.data.modal).modal("hide")}}]),d.show()});
//# sourceMappingURL=app.min.js.map